using System;
using System.Collections.Generic;
using System.IO;
using System.IO.Pipes;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace VapeGui
{
    class Protocol
    {
        internal static class IPC
        {
            // Token: 0x06000744 RID: 1860 RVA: 0x00020074 File Offset: 0x0001E274
            public static void SendData(string pipeName, string data, int timeout = 0)
            {
                NamedPipeClientStream namedPipeClientStream = null;
                try
                {
                    namedPipeClientStream = new NamedPipeClientStream(".", pipeName, PipeDirection.Out);
                    namedPipeClientStream.Connect(timeout);
                    using (StreamWriter streamWriter = new StreamWriter(namedPipeClientStream))
                    {
                        streamWriter.Write(data);
                    }
                }
                catch (TimeoutException)
                {
                }
                finally
                {
                    if (namedPipeClientStream != null)
                    {
                        namedPipeClientStream.Dispose();
                    }
                }
            }

            // Token: 0x06000745 RID: 1861 RVA: 0x000200E8 File Offset: 0x0001E2E8
            public static void Execute(string data)
            {
                IPC.SendData("visenya", data, 50);
            }
        }
    }
}
